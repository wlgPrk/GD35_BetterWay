<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">

	<!-- parameterType :받는값 -->
	<select id="getAdmin" parameterType="hashmap" resultType="hashmap">
	SELECT ADMIN_ID,ADMIN_NO
	FROM ADMIN
	WHERE ADMIN_ID=#{id} 
	AND ADMIN_PW=#{pw}
	</select>

	<select id="getDetail" parameterType="hashmap" resultType="hashmap">
	SELECT H.HAPPY_NO, H.SUBWAY_STATION_INCODE,ST.SUBWAY_STATION_NAME, H.LOCATION, 
	H.AREA, H.OPERATING_AGENCY, H.PHONE_NUM, H.DEL_STATUS 
	FROM HAPPY H INNER JOIN SUBWAY_STATION ST
                	ON H.SUBWAY_STATION_INCODE = ST.SUBWAY_STATION_INCODE
	WHERE H.HAPPY_NO = #{happy_no}
	</select>
	
	<insert id="addT" parameterType="hashmap">
	INSERT INTO HAPPY(HAPPY_NO, SUBWAY_STATION_INCODE, ADMIN_NO, 
                LOCATION, AREA, OPERATING_AGENCY, PHONE_NUM, DEL_STATUS)
	VALUES(HAPPY_SEQ.NEXTVAL, #{subway_station_incode} , 2, 
			#{location}, #{area}, #{operating_agency}, #{phone_num},1)
	</insert>
	
	<update id="deleteT" parameterType="hashmap">
	UPDATE HAPPY SET DEL_STATUS = 0 
	WHERE HAPPY_NO = #{happy_no}
	</update>

	<select id="getcoolingDetail" parameterType="hashmap" resultType="hashmap">
	SELECT WEAK_COOLING_CAR_NO,SUBLINE_NO,CAR_NO
	FROM WEAK_COOLING_CAR
	WHERE WEAK_COOLING_CAR_NO=#{weak_cooling_car_no}
	</select>
</mapper>