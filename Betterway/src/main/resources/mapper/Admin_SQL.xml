<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">

	<!-- parameterType :받는값 -->
	<select id="getAdmin" parameterType="hashmap" resultType="hashmap">
	SELECT ADMIN_ID,ADMIN_NO
	FROM ADMIN
	WHERE ADMIN_ID=#{id} 
	AND ADMIN_PW=#{pw}
	</select>

	<!-- 행복지대 -->
	<select id="getHDetail" parameterType="hashmap" resultType="hashmap">
	SELECT H.HAPPY_NO, H.SUBWAY_STATION_INCODE,ST.SUBWAY_STATION_NAME, H.LOCATION, 
	H.AREA, H.OPERATING_AGENCY, H.PHONE_NUM, H.DEL_STATUS 
	FROM HAPPY H INNER JOIN SUBWAY_STATION ST
                	ON H.SUBWAY_STATION_INCODE = ST.SUBWAY_STATION_INCODE
	WHERE H.HAPPY_NO = #{happy_no}
	</select>
	
	<insert id="addHT" parameterType="hashmap">
	INSERT INTO HAPPY(HAPPY_NO, SUBWAY_STATION_INCODE, ADMIN_NO, 
                LOCATION, AREA, OPERATING_AGENCY, PHONE_NUM, DEL_STATUS)
	VALUES(HAPPY_SEQ.NEXTVAL, #{subway_station_incode} , 2, 
			#{location}, #{area}, #{operating_agency}, #{phone_num},1)
	</insert>
	
	<update id="updateHT">
	UPDATE HAPPY SET SUBWAY_STATION_INCODE = #{subway_station_incode}, 
				 LOCATION = #{location}, AREA = #{area}, 
                 OPERATING_AGENCY = #{operating_agency}, PHONE_NUM = #{phone_num}
	WHERE HAPPY_NO = #{happy_no}
	</update>
	
	<update id="deleteHT" parameterType="hashmap">
	UPDATE HAPPY SET DEL_STATUS = 0 
	WHERE HAPPY_NO = #{happy_no}
	</update>
	<!-- 행복지대 끝 -->
	
	<select id="getCDetail" parameterType="hashmap" resultType="hashmap">
	SELECT ST.SUBWAY_STATION_INCODE,ST.SUBLINE_NO, ST.SUBWAY_STATION_NAME,ES.CYCLE_EXIST
	FROM SUBWAY_STATION ST INNER JOIN SUBWAY_STATION_ESTA ES
                        ON ST.SUBWAY_STATION_INCODE = ES.SUBWAY_STATION_INCODE
	WHERE ES.CYCLE_EXIST = 1 AND ST.SUBWAY_STATION_INCODE = #{subway_station_incode}
	ORDER BY SUBWAY_STATION_INCODE ASC
	</select>
	
	<update id="addcycleT" parameterType="hashmap">
	UPDATE SUBWAY_STATION_ESTA SET CYCLE_EXIST = 1
	WHERE SUBWAY_STATION_INCODE = #{subway_station_incode}
	</update>
	
	<update id="deletecycleT" parameterType="hashmap">
	UPDATE SUBWAY_STATION_ESTA SET CYCLE_EXIST = 0
	WHERE SUBWAY_STATION_INCODE = #{subway_station_incode}
	</update>

	<select id="getcoolingDetail" parameterType="hashmap" resultType="hashmap">
	SELECT WEAK_COOLING_CAR_NO,SUBLINE_NO,CAR_NO
	FROM WEAK_COOLING_CAR
	WHERE WEAK_COOLING_CAR_NO=#{weak_cooling_car_no}
	</select>
	
	<insert id="addcooling" parameterType="hashmap">
	INSERT INTO WEAK_COOLING_CAR
	VALUES(COOLING_SEQ.NEXTVAL,#{subline_no},4,#{car_no})
	</insert>
	
	<select id="guideList" parameterType="hashmap" resultType="hashmap">
	SELECT GUIDE_NO,CATEGORY,TRAFFIC_CARD,D_TRAFFIC_CARD
	FROM CHARGE_GUIDE
	
	</select>
	
	<!-- 운임 상세 -->
	<select id="getguideDetail" parameterType="hashmap" resultType="hashmap">
	SELECT GUIDE_NO,CATEGORY,TRAFFIC_CARD,D_TRAFFIC_CARD
	FROM CHARGE_GUIDE
	WHERE GUIDE_NO=#{guide_no}
	</select>
	
	<select id="getc" parameterType="hashmap" resultType="hashmap">
	SELECT WEAK_COOLING_CAR_NO,SUBLINE_NO,CAR_NO
	FROM WEAK_COOLING_CAR
	WHERE WEAK_COOLING_CAR_NO=#{weak_cooling_car_no}
	</select>
	
	<!-- 냉방 업데이트 -->
	<update id="updateS" parameterType="hashmap">
	UPDATE WEAK_COOLING_CAR SET CAR_NO = #{car_no}
  	WHERE WEAK_COOLING_CAR_NO = #{weak_cooling_car_no}
	</update>
	
	<!-- 냉방 삭제 -->
	<delete id="deletecooling" parameterType="hashmap">
	DELETE FROM WEAK_COOLING_CAR
	WHERE WEAK_COOLING_CAR_NO=#{weak_cooling_car_no}
	</delete>
		
	<!-- 운임 등록 -->
	<insert id="addguide" parameterType="hashmap">
	INSERT INTO CHARGE_GUIDE
	VALUES(CHARGE_SEQ.NEXTVAL,#{category},#{traffic_card},#{d_traffic_card},4)
	</insert>
	
	<!-- 운임 업데이트 -->
	<update id="updateG" parameterType="hashmap">
	 UPDATE CHARGE_GUIDE SET CATEGORY = #{category}, TRAFFIC_CARD=#{traffic_card},D_TRAFFIC_CARD=#{d_traffic_card}
  	 WHERE GUIDE_NO = #{guide_no}
	</update>	
	
	<select id="getg" parameterType="hashmap" resultType="hashmap">
	SELECT CATEGORY,TRAFFIC_CARD,D_TRAFFIC_CARD
	FROM CHARGE_GUIDE
	WHERE GUIDE_NO=#{guide_no}
	</select> 
		
</mapper>